"use strict";

exports.__esModule = true;
exports.default = useWindowResize;

var _rax = require("rax");

var _index = require("../index");

function useWindowResize(breakPoints, onBreakPointChange, responsive) {
  if (responsive === void 0) {
    responsive = false;
  }

  var _useState = (0, _rax.useState)((0, _index.getCurBreakPoint)(breakPoints)),
      curBreakPoint = _useState[0],
      setBreakPoint = _useState[1];

  var resize = (0, _index.throttle)(function () {
    var newBreakPoint = (0, _index.getCurBreakPoint)(breakPoints); // breakpoint change callback

    if (onBreakPointChange && newBreakPoint.width !== curBreakPoint.width) {
      onBreakPointChange(newBreakPoint, curBreakPoint, breakPoints);
    }

    setBreakPoint(newBreakPoint);
  });
  (0, _rax.useEffect)(function () {
    if (responsive) {
      window.addEventListener('resize', resize, false);
      return function () {
        return window.removeEventListener('resize', resize, false);
      };
    }

    return function () {};
  }, [responsive, resize]);
  return curBreakPoint;
}